import 'package:flutter/foundation.dart';
import 'package:flutter_test/flutter_test.dart';
import 'package:twozerofoureight/domain/core/logic/action_runner/action_runner.dart';
import 'package:twozerofoureight/domain/core/logic/board_actors/merge_only_actor.dart';
import 'package:twozerofoureight/domain/core/logic/board_actors/slide_actor.dart';
import 'package:twozerofoureight/domain/core/logic/board_direction.dart';
import 'package:twozerofoureight/domain/puzzle/models/block/block.dart';
import 'package:twozerofoureight/domain/puzzle/models/board/board.dart';
import 'package:twozerofoureight/domain/puzzle/value_objects/block_point.dart';
import 'package:twozerofoureight/domain/puzzle/value_objects/board_size.dart';
import 'package:twozerofoureight/helpers/list_extensions.dart';

void main() {
  group("Merge only actor test => ", () {
    test("should return board without modification if board is invalid", () {
      final board = Board(blocks: [
        Block.random(index: 3, boardSize: 3),
        Block.random(index: 4, boardSize: 3),
        Block.random(index: 5, boardSize: 3),
        Block.random(index: 6, boardSize: 3),
        Block.random(index: 7, boardSize: 3),
        Block.random(index: 8, boardSize: 3),
      ]);

      expect(
          ActionRunner(MergeOnlyActor(board, direction: BoardDirection.left()))
              .run(),
          equals(board));
    });
    group("Merged block modification test => ", () {
      void testMergeOnlyBoard(
          {@required int no,
          @required BoardSize boardSize,
          @required BoardDirection direction,
          @required List<BlockPoint> points,
          @required List<BlockPoint> expectedPoints}) {
        test(
            'should return merged only board in $direction for board pattern no: $no',
            () {
          if (points.length != boardSize.totalSize ||
              expectedPoints.length != boardSize.totalSize) {
            expect(true, false);
            return;
          }
          final blocks = List.generate(boardSize.totalSize, (index) {
            return Block.empty(index: index, boardSize: boardSize.value)
                .copyWith(point: points[index]);
          });
          final board = Board(blocks: blocks);
          final expectedBlocks = List.generate(boardSize.totalSize, (index) {
            return Block.empty(index: index, boardSize: boardSize.value)
                .copyWith(point: expectedPoints[index]);
          });
          final expectedBoard = Board(blocks: expectedBlocks);
          final mergedOnlyBoard =
              ActionRunner(SlideActor(board, direction: direction))
                  .chain((slidedBoard) {
            return MergeOnlyActor(slidedBoard, direction: direction);
          }).run();

          mergedOnlyBoard.blocks.indexedMap((index, mergedOnlyBlock) {
            final expectedBlock = expectedBoard.blocks[index];
            expect(mergedOnlyBlock.index, equals(expectedBlock.index));
            expect(mergedOnlyBlock.point, equals(expectedBlock.point));
          });
        });
      }

      group("For board size 3", () {
        final boardSize = BoardSize(3);
        group("For left direction", () {
          final direction = BoardDirection.left();
          testMergeOnlyBoard(
            no: 1,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
          testMergeOnlyBoard(
            no: 2,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two
            ],
            expectedPoints: [
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
          testMergeOnlyBoard(
            no: 3,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.four
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
          testMergeOnlyBoard(
            no: 4,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
          testMergeOnlyBoard(
            no: 5,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.four.mergedPoint(),
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
        });
        group("for right direction => ", () {
          final direction = BoardDirection.right();
          testMergeOnlyBoard(
            no: 1,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
          testMergeOnlyBoard(
            no: 2,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four
            ],
          );
          testMergeOnlyBoard(
            no: 3,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four
            ],
          );
          testMergeOnlyBoard(
            no: 4,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
          testMergeOnlyBoard(
            no: 5,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
        });

        group("For up direction => ", () {
          final direction = BoardDirection.up();
          testMergeOnlyBoard(
            no: 1,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
          testMergeOnlyBoard(
            no: 2,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
          testMergeOnlyBoard(
            no: 3,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.four,
            ],
            expectedPoints: [
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
          testMergeOnlyBoard(
            no: 4,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
          testMergeOnlyBoard(
            no: 5,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.four.mergedPoint()
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty
            ],
          );
        });

        group("for down direction => ", () {
          final direction = BoardDirection.down();
          testMergeOnlyBoard(
              no: 1,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 2,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four
              ]);
          testMergeOnlyBoard(
              no: 3,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 4,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.two
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty
              ]);
          testMergeOnlyBoard(
              no: 5,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty
              ]);
        });
      });

      group("for board size 4 => ", () {
        final boardSize = BoardSize(4);
        group("for left direction => ", () {
          final direction = BoardDirection.left();
          testMergeOnlyBoard(
              no: 1,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 2,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty
              ],
              expectedPoints: [
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 3,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty
              ],
              expectedPoints: [
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 4,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two
              ],
              expectedPoints: [
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 5,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 6,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 7,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four
              ],
              expectedPoints: [
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 8,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 9,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four.mergedPoint(),
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four.mergedPoint(),
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four.mergedPoint()
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 10,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four.mergedPoint(),
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint(),
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint().mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint().mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
        });
        group("for right direction => ", () {
          final direction = BoardDirection.right();
          testMergeOnlyBoard(
            no: 1,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
          testMergeOnlyBoard(
              no: 2,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
              ]);
          testMergeOnlyBoard(
              no: 3,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 4,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
              ]);
          testMergeOnlyBoard(
            no: 5,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
          testMergeOnlyBoard(
            no: 6,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
            ],
          );
          testMergeOnlyBoard(
            no: 7,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
            ],
          );
          testMergeOnlyBoard(
            no: 8,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
            ],
          );
          testMergeOnlyBoard(
            no: 9,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
            ],
          );
          testMergeOnlyBoard(
            no: 10,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four.mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four.mergedPoint().mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint().mergedPoint(),
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
        });
        group("for up direction => ", () {
          final direction = BoardDirection.up();
          testMergeOnlyBoard(
              no: 1,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 2,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
              ],
              expectedPoints: [
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 3,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 4,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
              ],
              expectedPoints: [
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 5,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 6,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
              ],
              expectedPoints: [
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 7,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four,
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 8,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four,
              ],
              expectedPoints: [
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 9,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint(),
              ],
              expectedPoints: [
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
          testMergeOnlyBoard(
              no: 10,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint(),
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint().mergedPoint(),
                BlockPoint.four.mergedPoint(),
                BlockPoint.four.mergedPoint(),
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint().mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
              ]);
        });
        group("for down direction => ", () {
          final direction = BoardDirection.down();
          testMergeOnlyBoard(
            no: 1,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
          testMergeOnlyBoard(
            no: 2,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
            ],
          );
          testMergeOnlyBoard(
            no: 3,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
            ],
          );
          testMergeOnlyBoard(
            no: 4,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
            ],
          );
          testMergeOnlyBoard(
            no: 5,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
          testMergeOnlyBoard(
            no: 6,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
          testMergeOnlyBoard(
              no: 7,
              boardSize: boardSize,
              direction: direction,
              points: [
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.two,
                BlockPoint.four,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.empty,
                BlockPoint.two,
                BlockPoint.two,
                BlockPoint.two,
              ],
              expectedPoints: [
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four.mergedPoint(),
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.empty,
                BlockPoint.four,
                BlockPoint.four,
                BlockPoint.four,
              ]);
          testMergeOnlyBoard(
            no: 8,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
          testMergeOnlyBoard(
            no: 9,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.four.mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.two,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.empty,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
          testMergeOnlyBoard(
            no: 10,
            boardSize: boardSize,
            direction: direction,
            points: [
              BlockPoint.empty,
              BlockPoint.four.mergedPoint().mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.four.mergedPoint(),
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.four,
              BlockPoint.empty,
              BlockPoint.two,
              BlockPoint.two,
              BlockPoint.two,
            ],
            expectedPoints: [
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint().mergedPoint(),
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.four.mergedPoint(),
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
              BlockPoint.empty,
            ],
          );
        });
      });
    });
  });
}
